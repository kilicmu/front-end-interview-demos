## dns相关
#### 1. dns服务使用了什么传输协议？
大部分使用UDP，少数时候使用TCP
#### 2. 为什么这么使用UDP
大部分的DNS查询数据包很小（约15-75字节），如果使用TCP传输经计算会有下面的问题：
1. tcp链接的建立会进行三次网络通信
2. 建立一个tcp链接需要传输约130个字节数据
3. 销毁tcp链接需要四次网络通信
4. 销毁需要传输160个左右字节

建立tcp链接传输的字节数都已经大于数据包的大小，同时考虑到目标DNS服务器不存在DNS解析记录会向根服务器递归查询，会造成严重的网络资源浪费与性能问题。
#### 3. 什么时候使用TCP？
当传输数据量大时我们需要使用TCP保证DNS服务的稳定性。

当单个数据包的大小达到一个最大传输单元（MTU），在数据链路层会对UDP数据包进行分帧传输，会造成数据的丢帧。

这时候就需要用TCP解决这个问题。
并且数据量增大，TCP链接的额外开销便会减小。